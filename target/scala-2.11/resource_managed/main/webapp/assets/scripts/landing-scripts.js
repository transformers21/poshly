!function(a){"use strict";function b(a,b){return 0===a.lastIndexOf(b,0)}function c(a){window.location.replace(a),"http://local.dev.poshly.com:9000"!==window.location.origin&&window.location.reload()}function d(a){return"http://localhost:9000"===a||"http://local.dev.poshly.com:9000"===a?"http://dev.poshly.com/products/api/v1/authenticate":"api/v1/authenticate"}function e(a){var b=a.split("/#/");return b[1]?"http://dev.poshly.com"===b[0]?"/products/#/"+b[1]:"/#/"+b[1]:f(b[0])}function f(a){return"http://dev.poshly.com"===a?"/products/#/dashboard":"/#/dashboard"}function g(){localStorage.userName=a("#username").val()}function h(b,d,f){var g=e(f);a.ajax({url:b,type:"POST",data:d,xhrFields:{withCredentials:!0},success:function(b){if(b.error)return void a("#invalid_message").show();a("#invalid_message").hide(),a("body").append(b),c(g)},error:function(b){console.error(b),a("#invalid_message").show()}})}function i(b){a.ajax({url:"api/v1/authenticate/signup",type:"POST",data:b,xhrFields:{withCredentials:!0},success:function(b){if(b.error&&b.error.messages&&b.error.messages[0]&&b.error.messages[0].message){var c=b.error.messages[0].message;a("#check_your_email").hide(),a("#invalid_email_message").text(c),a("#invalid_email").show()}else a("#invalid_email").hide(),a("#check_your_email").show()},error:function(a){console.error(a)}})}var j=!1,k=document.URL;(b(k,"http://local.dev")||b(k,"http://dev"))&&a("#forgot-password").attr("href","http://dev.poshly.com/sign-in/recover"),a(document).bind("keypress",function(b){if(13===b.keyCode)return a("#login-button").trigger("click"),!1});var l="";a("#login-button").click(function(){l="login-button",a(this).addClass("active")}),a("#signup-button").click(function(){l="signup-button",a(this).addClass("active")}),a("#login-form").submit(function(b){b.preventDefault();var c=l,e=a(this),f={},m=window.location.origin,n=d(m),o=!0;return f.locale=navigator.language,g(),e.find("[name]").each(function(){var b=a(this),c=b.attr("name"),d=b.val(),e="#invalid_"+c;a(e).hide(),d.length||"checkbox"===c||(a(e).toggle(),o=!1),j||b.on("focusout",function(){var b=a(this),c=b.attr("name"),d=b.val(),e="#invalid_"+c;a(e).hide(),d.length||"checkbox"===c||(a(e).toggle(),o=!1)}),f[c]=d}),j=!0,o&&"login-button"===c?h(n,f,k):o&&"signup-button"===c&&i(f),!1}),function(){a("#username").val(localStorage.userName)}()}(jQuery);